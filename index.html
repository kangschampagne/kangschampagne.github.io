<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta property="og:type" content="website">
<meta property="og:title" content="Kagen-Blog">
<meta property="og:url" content="https://kangschampagne.github.io/index.html">
<meta property="og:site_name" content="Kagen-Blog">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Kagen-Blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://kangschampagne.github.io/"/>





  <title>Kagen-Blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Kagen-Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kangschampagne.github.io/2017/08/20/第三课笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kangschampagne">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kagen-Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/20/第三课笔记/" itemprop="url">第三课笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-08-20T18:00:00+08:00">
                2017-08-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="答疑"><a href="#答疑" class="headerlink" title="答疑"></a>答疑</h2><ul>
<li>express egg koa 新手应该学习哪个<ol>
<li>connect: no generator, async function</li>
<li>koa: Node 8.0 astnc function, Node 6.0 generator</li>
<li>egg</li>
</ol>
</li>
</ul>
<h2 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h2><blockquote>
<p>homework2</p>
<ul>
<li>学会插件系统 <a href="https://github.com/webpack/tapable" target="_blank" rel="external">tapable</a> ，并根据插件系统，定制出自己的请求库</li>
<li>仓库地址 <a href="https://github.com/kangschampagne/homework2" target="_blank" rel="external">https://github.com/kangschampagne/homework2</a></li>
<li>tapable讲解</li>
</ul>
</blockquote>
<h2 id="异步流程控制"><a href="#异步流程控制" class="headerlink" title="异步流程控制"></a>异步流程控制</h2><h3 id="callback"><a href="#callback" class="headerlink" title="callback"></a>callback</h3><p>如何解决 <a href="http://callbackhell.com/" target="_blank" rel="external">callhell</a></p>
<ul>
<li>给匿名函数提供名字，将他们分离保持一种浅代码的风格</li>
<li>模块化 后期新的技术可以使用</li>
<li>promise</li>
<li>generators</li>
<li>Async function</li>
<li>run-parallel or run-series</li>
</ul>
<h3 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h3><p><img src="./1503207145605.png" alt="Alt text"><br><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="external">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise</a></p>
<h3 id="Stream"><a href="#Stream" class="headerlink" title="Stream"></a>Stream</h3><blockquote>
<p>node.js <a href="https://nodejs.org/dist/latest-v8.x/docs/api/stream.htmlhttps://nodejs.org/dist/latest-v8.x/docs/api/stream.html" target="_blank" rel="external">steam</a> 文档<br>Steam 是 NodeJS 的核心编程模型，James Halliday 写过一本指南 <a href="https://github.com/substack/stream-handbook" target="_blank" rel="external">stream-handbook</a></p>
</blockquote>
<h4 id="readable-steam"><a href="#readable-steam" class="headerlink" title="readable-steam"></a>readable-steam</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * Proimse 只能回调一次，但是如果处理数据很大，需要分很多片怎么办呢？</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">const</span> Readable = <span class="built_in">require</span>(<span class="string">'stream'</span>).Readable</div><div class="line"><span class="keyword">const</span> rs = <span class="keyword">new</span> Readable</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 创建一个方法可以中断线程</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">wait</span>(<span class="params">time</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</div><div class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">      resolve()</div><div class="line">    &#125;, time)</div><div class="line">  &#125;)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 假设我们的数据源数据很大，读取的时候只能够一块一块读取，否则会卡住很久</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">const</span> source = <span class="string">'aiopshdviaowefipoajsdpoghapeisfhlasdfasdf'</span>.split(<span class="string">''</span>)</div><div class="line"></div><div class="line">rs._read = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  !!source.length &amp;&amp;</div><div class="line">    wait(<span class="number">100</span>)</div><div class="line">      .then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">        <span class="keyword">if</span> (source.length &gt; <span class="number">1</span>) &#123;</div><div class="line">          rs.push(source.shift())</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">          rs.push(source.shift())</div><div class="line">          rs.push(<span class="string">'\n'</span>)</div><div class="line">          rs.push(<span class="literal">null</span>)</div><div class="line">        &#125;</div><div class="line">      &#125;)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * rs | process.stdout</span></div><div class="line"><span class="comment"> */</span></div><div class="line">rs.pipe(process.stdout)</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * a.pipe(b).pipe(c).pipe(d) =</span></div><div class="line"><span class="comment"> * a.pipe(b); b.pipe(c); c.pipe(d) ≈</span></div><div class="line"><span class="comment"> * a | b | c</span></div><div class="line"><span class="comment"> */</span></div></pre></td></tr></table></figure>
<h4 id="writeable-steam"><a href="#writeable-steam" class="headerlink" title="writeable-steam"></a>writeable-steam</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</div><div class="line"><span class="keyword">const</span> ws = fs.createWriteStream(<span class="string">'./message.txt'</span>)</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 向 Writable Steam 传入一段数据</span></div><div class="line"><span class="comment"> */</span></div><div class="line">ws.write(<span class="string">'beep '</span>)</div><div class="line"></div><div class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="comment">/**</span></div><div class="line"><span class="comment">   * 告诉 Writeable Stream 结束了</span></div><div class="line"><span class="comment">   */</span></div><div class="line">  ws.end(<span class="string">'boop\n'</span>)</div><div class="line">&#125;, <span class="number">1000</span>)</div></pre></td></tr></table></figure>
<h4 id="http"><a href="#http" class="headerlink" title="http"></a>http</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>)</div><div class="line"></div><div class="line"><span class="keyword">const</span> server = http.createServer(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">let</span> body = <span class="string">''</span></div><div class="line"></div><div class="line">  req.setEncoding(<span class="string">'utf8'</span>)</div><div class="line">  <span class="comment">/**</span></div><div class="line"><span class="comment">   * 当有数据的时候</span></div><div class="line"><span class="comment">   */</span></div><div class="line">  req.on(<span class="string">'data'</span>, chunk =&gt; &#123;</div><div class="line">    body += chunk</div><div class="line">  &#125;)</div><div class="line"></div><div class="line">  req.on(<span class="string">'end'</span>, () =&gt; &#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line"><span class="comment">     * 试试是不是 JSON 格式</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">      <span class="keyword">const</span> data = <span class="built_in">JSON</span>.parse(body)</div><div class="line">      res.write(<span class="string">`<span class="subst">$&#123;<span class="keyword">typeof</span> data&#125;</span>\n`</span>)</div><div class="line">      res.end()</div><div class="line">    &#125; <span class="keyword">catch</span>(e) &#123;</div><div class="line">      res.statusCode = <span class="number">404</span></div><div class="line">      res.end(<span class="string">`error: <span class="subst">$&#123;e.message&#125;</span>\n`</span>)</div><div class="line">    &#125;</div><div class="line">  &#125;)</div><div class="line">&#125;)</div><div class="line"></div><div class="line">server.listen(<span class="number">8080</span>, () =&gt; &#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'listen 8080'</span>)</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * curl localhost:8080 -d "&#123;&#125;"  ==&gt; Object</span></div><div class="line"><span class="comment"> * curl localhost:8080 -d "\"foo\"" ==&gt; String</span></div><div class="line"><span class="comment"> * curl localhost:8080 -d "not json" ==&gt; error: Unexpocted token in JSON at ...</span></div><div class="line"><span class="comment"> */</span></div></pre></td></tr></table></figure>
<h4 id="read-n-write"><a href="#read-n-write" class="headerlink" title="read-n-write"></a>read-n-write</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 创建一个 Readable Stream，读取 message.txt</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">const</span> read = fs.createReadStream(<span class="string">'./message.txt'</span>)</div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 创建一个 Writable Stream，写入 message.clone.txt</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">const</span> write = fs.createWriteStream(<span class="string">'./message.clone.txt'</span>)</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 接水管</span></div><div class="line"><span class="comment"> */</span></div><div class="line">read.pipe(write)</div><div class="line">管道模型在 nodejs 里很常见</div></pre></td></tr></table></figure>
<h4 id="gzip"><a href="#gzip" class="headerlink" title="gzip"></a>gzip</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> zlib = <span class="built_in">require</span>(<span class="string">'zlib'</span>)</div><div class="line"><span class="keyword">const</span> gzip = zlib.createGzip()</div><div class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</div><div class="line"><span class="keyword">const</span> inp = fs.createReadStream(<span class="string">'message.txt'</span>)</div><div class="line"><span class="keyword">const</span> out = fs.createWriteStream(<span class="string">'message.txt.gz'</span>)</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 跟前一个例子很像，只是加了一个 Transform Steam</span></div><div class="line"><span class="comment"> */</span></div><div class="line">inp.pipe(gzip).pipe(out)</div></pre></td></tr></table></figure>
<p>gzip 压缩</p>
<h3 id="Generator"><a href="#Generator" class="headerlink" title="Generator"></a>Generator</h3><h4 id="generator"><a href="#generator" class="headerlink" title="generator"></a>generator</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">yield</span> <span class="number">1</span></div><div class="line">  <span class="keyword">yield</span> <span class="number">2</span></div><div class="line">  <span class="keyword">yield</span> <span class="number">3</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> g = gen()</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(g.next()) <span class="comment">// =&gt; &#123; value: 1, done: false &#125;</span></div><div class="line"><span class="built_in">console</span>.log(g.next()) <span class="comment">// =&gt; &#123; value: 2, done: false &#125;</span></div><div class="line"><span class="built_in">console</span>.log(g.next()) <span class="comment">// =&gt; &#123; value: 3, done: false &#125;</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 梦想的代码</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="comment">// function xxx() &#123;</span></div><div class="line"><span class="comment">//   doSomething()</span></div><div class="line"><span class="comment">//   await(1000)</span></div><div class="line"><span class="comment">//   doOther()</span></div><div class="line"><span class="comment">// &#125;</span></div></pre></td></tr></table></figure>
<p>生成器 <a href="http://www.ruanyifeng.com/blog/2015/04/generator.html" target="_blank" rel="external">阮一峰文章- Generator 函数的含义与用法</a></p>
<h4 id="generator-async"><a href="#generator-async" class="headerlink" title="generator-async"></a>generator-async</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 做个等待函数</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">wait</span>(<span class="params">time</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</div><div class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">      resolve()</div><div class="line">    &#125;, time)</div><div class="line">  &#125;)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 做一个简单的运行器</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">runer</span>(<span class="params">g</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> item = g.next()</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (!item.done) &#123;</div><div class="line">    <span class="comment">// 如果是 Promise </span></div><div class="line">    <span class="keyword">if</span> (item.value <span class="keyword">instanceof</span> <span class="built_in">Promise</span>) &#123;</div><div class="line">      item.value.then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</div><div class="line">        runer(g)</div><div class="line">      &#125;)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 实际代码</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>)</div><div class="line">  <span class="keyword">yield</span> wait(<span class="number">1000</span>)</div><div class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>)</div><div class="line">  <span class="keyword">yield</span> wait(<span class="number">1000</span>)</div><div class="line">  <span class="built_in">console</span>.log(<span class="number">3</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line">runer(gen())</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 业界的确实现了类似 co 之类的优秀框架，但是大型应用的错误堆栈不太友好，</span></div><div class="line"><span class="comment"> * 比较难定位，所以现在都建议直接使用 async function =&gt; 原生实现</span></div><div class="line"><span class="comment"> */</span></div></pre></td></tr></table></figure>
<p><a href="https://github.com/tj/co" target="_blank" rel="external">co 框架</a></p>
<h4 id="async-function"><a href="#async-function" class="headerlink" title="async-function"></a>async-function</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">wait</span>(<span class="params">time</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</div><div class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">      resolve()</div><div class="line">    &#125;, time)</div><div class="line">  &#125;)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">app</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>)</div><div class="line">  <span class="keyword">await</span> wait(<span class="number">1000</span>)</div><div class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>)</div><div class="line">  <span class="keyword">await</span> wait(<span class="number">1000</span>)</div><div class="line">  <span class="built_in">console</span>.log(<span class="number">3</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line">app()</div></pre></td></tr></table></figure>
<p>await 可返回值<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/async_function" target="_blank" rel="external">async function</a> 文档</p>
<h3 id="RxJS"><a href="#RxJS" class="headerlink" title="RxJS"></a>RxJS</h3><p>管道模型用在前端 <a href="https://buctwbzs.gitbooks.io/rxjs/content/" target="_blank" rel="external">RxJS</a> 文档<br>可视化的工具  <a href="https://rxviz.com/examples/basic-interval" target="_blank" rel="external">https://rxviz.com/examples/basic-interval</a></p>
<h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><ul>
<li>bluebird<br>Bluebird是一个全功能的Promise库，目标是创新特性和性能。Bluebird是一个全功能的Promise库，目标是创新特性和性能。</li>
<li>顺序执行实现<br>打包函数队列 <a href="http://www.cnblogs.com/justany/archive/2013/01/25/2874602.html" target="_blank" rel="external">http://www.cnblogs.com/justany/archive/2013/01/25/2874602.html</a></li>
</ul>
<h2 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h2><h3 id="global"><a href="#global" class="headerlink" title="global"></a>global</h3><h4 id="global-module"><a href="#global-module" class="headerlink" title="global-module"></a>global-module</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 最早的模块化其实并不算模块化</span></div><div class="line"><span class="comment"> */</span></div><div class="line"></div><div class="line">!<span class="function"><span class="keyword">function</span> (<span class="params">root</span>) </span>&#123;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">$</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// TODO</span></div><div class="line">  &#125;</div><div class="line">  root.$ = $</div><div class="line">&#125;(global)</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 当时主要期望通过闭包，来解决全局变量污染的问题</span></div><div class="line"><span class="comment"> * 但实际上，我们的库依然会占用全局变量</span></div><div class="line"><span class="comment"> * 那么如果用一个库跟你使用的是同一个变量名咋办呢？</span></div><div class="line"><span class="comment"> */</span></div></pre></td></tr></table></figure>
<h4 id="global-confict"><a href="#global-confict" class="headerlink" title="global-confict"></a>global-confict</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">!<span class="function"><span class="keyword">function</span> (<span class="params">root</span>) </span>&#123;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">$</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// 第一个</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'i am no.1'</span>)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">/**</span></div><div class="line"><span class="comment">   * 非冲突</span></div><div class="line"><span class="comment">   */</span></div><div class="line">  <span class="comment">// $.noConflict = function () &#123;</span></div><div class="line">  <span class="comment">//   root.$ = null</span></div><div class="line">  <span class="comment">//   return $</span></div><div class="line">  <span class="comment">// &#125;</span></div><div class="line"></div><div class="line">  root.$ = $</div><div class="line">&#125;(global)</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 处理冲突</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="comment">// const jQuery = $.noConflict()</span></div><div class="line"></div><div class="line"><span class="comment">// function a() &#123;</span></div><div class="line"><span class="comment">//   jQuery()</span></div><div class="line"><span class="comment">// &#125;</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  $()</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">!<span class="function"><span class="keyword">function</span> (<span class="params">root</span>) </span>&#123;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">$</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// 第二个</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'i am no.2'</span>)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  root.$ = $</div><div class="line">&#125;(global)</div><div class="line"></div><div class="line">a()</div></pre></td></tr></table></figure>
<h3 id="CommonJS"><a href="#CommonJS" class="headerlink" title="CommonJS"></a>CommonJS</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 1.commpn.js</span></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 相对路径调用</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">const</span> fail = <span class="built_in">require</span>(<span class="string">'./module/export-fail'</span>)</div><div class="line"></div><div class="line">fail() <span class="comment">// hello world</span></div><div class="line"><span class="built_in">console</span>.log(fail.word) <span class="comment">// undefined</span></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 为什么会这样？</span></div><div class="line"><span class="comment"> */</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// module/export-fail.js</span></div><div class="line">exports.word = <span class="string">'hello'</span></div><div class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(exports.word)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>问题： 为什么 拿不到 fail.word ?<br>指向改变。 exports 是一个对象， 后面方法的赋值 把对象的指向改变了。<br>例子：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</div><div class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">runner</span>(<span class="params">file</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> code = fs.readFileSync(path.join(__dirname, file), <span class="string">'utf-8'</span>)</div><div class="line">  <span class="keyword">const</span> <span class="built_in">module</span> = &#123; <span class="attr">exports</span>: &#123;&#125; &#125;</div><div class="line">  <span class="keyword">const</span> fn = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">'module'</span>, <span class="string">'exports'</span>, code)</div><div class="line">  fn(<span class="built_in">module</span>, <span class="built_in">module</span>.exports)</div><div class="line">  <span class="comment">// module.exports =&gt; [ Function ]</span></div><div class="line">  <span class="keyword">return</span> <span class="built_in">module</span>.exports</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> fail = runner(<span class="string">'./module/export-fail.js'</span>)</div><div class="line"></div><div class="line">fail()</div><div class="line"><span class="built_in">console</span>.log(fail.word)</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * fn 到底生成了怎样的函数？</span></div><div class="line"><span class="comment"> * 这时候看出来为什么了吗？</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">_fn</span>(<span class="params">module, exports</span>) </span>&#123;</div><div class="line">  exports.word = <span class="string">'hello'</span></div><div class="line">  <span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(exports.word)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>注意： Function 构造函数 创建一个新的Function对象。 在 JavaScript 中, 每个函数实际上都是一个Function对象。<br>new Function ([arg1[, arg2[, …argN]],] functionBody)<br>functionBody: 一个含有包括函数定义的JavaScript语句的字符串。</p>
</blockquote>
<h3 id="AMD"><a href="#AMD" class="headerlink" title="AMD"></a>AMD</h3><p>RequireJS 的规范（CommonJS出现之后，Javascript社区写的）<br>例子： 具名模块<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// main.js</span></div><div class="line"><span class="comment">// 我们怎么加载一个js？</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">require</span>(<span class="params">path, cb</span>) </span>&#123;</div><div class="line">    <span class="keyword">const</span> script = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>)</div><div class="line">    script.src = path</div><div class="line">    script.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        cb(<span class="built_in">require</span>._[path])</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">document</span>.body.appendChild(script)</div><div class="line">&#125;</div><div class="line"><span class="built_in">require</span>._ = &#123;&#125;</div><div class="line"></div><div class="line"><span class="comment">// 实现一个对应的define</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">define</span>(<span class="params">path, factory</span>) </span>&#123;</div><div class="line">    <span class="keyword">let</span> <span class="built_in">module</span></div><div class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> factory === <span class="string">'function'</span>) &#123;</div><div class="line">        <span class="built_in">module</span> = factory()</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">module</span> = factory</div><div class="line">    <span class="built_in">require</span>._[path] = <span class="built_in">module</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">require</span>(<span class="string">'./cases/5.require-have-name.js'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">mod</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(mod)</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// require-have-name.js</span></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 如果是一个有名模块，那很简单呀</span></div><div class="line"><span class="comment"> */</span></div><div class="line">define(<span class="string">'./cases/5.require-have-name.js'</span>, <span class="string">'hello world'</span>)</div></pre></td></tr></table></figure>
<p>例子：匿名模块<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// main.js</span></div><div class="line"><span class="comment">// 我们怎么加载一个js？</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">require</span>(<span class="params">path, cb</span>) </span>&#123;</div><div class="line">    <span class="keyword">const</span> script = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>)</div><div class="line">    script.src = path</div><div class="line">    script.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">const</span> factory = <span class="built_in">require</span>.stack.shift()</div><div class="line">        <span class="keyword">let</span> <span class="built_in">module</span></div><div class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> factory === <span class="string">'function'</span>) &#123;</div><div class="line">            <span class="built_in">module</span> = factory()</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">module</span> = factory</div><div class="line">        <span class="built_in">require</span>._[path] = <span class="built_in">module</span></div><div class="line">        cb(<span class="built_in">module</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">document</span>.body.appendChild(script)</div><div class="line">&#125;</div><div class="line"><span class="built_in">require</span>._ = &#123;&#125;</div><div class="line"><span class="built_in">require</span>.stack = []</div><div class="line"></div><div class="line"><span class="comment">// 实现一个对应的define</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">define</span>(<span class="params">factory</span>) </span>&#123;</div><div class="line">    <span class="built_in">require</span>.stack.push(factory)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">require</span>(<span class="string">'./cases/6.require-no-name.js'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">mod</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(mod())</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// require-no-name.js</span></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 但如果是个无名模块呢？</span></div><div class="line"><span class="comment"> */</span></div><div class="line">define(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="string">'hello world'</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="CMD"><a href="#CMD" class="headerlink" title="CMD"></a>CMD</h3><p>seajs 的规范 （玉伯造轮子）</p>
<h3 id="AMD和CMD的差别"><a href="#AMD和CMD的差别" class="headerlink" title="AMD和CMD的差别"></a>AMD和CMD的差别</h3><blockquote>
<p>对于依赖的模块，<br>AMD 是提前执行，<br>CMD 是延迟执行，第一次做require操作的时候执行的</p>
<p>不过 RequireJS 从 2.0 开始，也改成可以延迟执行（根据写法不同，处理方式不同）。<br>CMD 推崇 as lazy as possible.2. CMD 推崇依赖就近<br>AMD 推崇依赖前置<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//CMD</span></div><div class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params">require, exports, module</span>) </span>&#123;</div><div class="line">   <span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">'./a'</span>)   </div><div class="line">   a.doSomething()   <span class="comment">// 此处略去 100 行   </span></div><div class="line">   <span class="keyword">var</span> b = <span class="built_in">require</span>(<span class="string">'./b'</span>) <span class="comment">// 依赖可以就近书写   </span></div><div class="line">   b.doSomething()   <span class="comment">// ... </span></div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">//AMD </span></div><div class="line">默认推荐的是define([<span class="string">'./a'</span>, <span class="string">'./b'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</div><div class="line">   <span class="comment">// 依赖必须一开始就写好</span></div><div class="line">   a.doSomething()    <span class="comment">// 此处略去 100 行    </span></div><div class="line">   b.doSomething()    </div><div class="line">   ...</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="避免循环依赖"><a href="#避免循环依赖" class="headerlink" title="避免循环依赖"></a>避免循环依赖</h3><p>方法是拆解模块，循环依赖本身不该出现</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://kangschampagne.github.io/2017/08/19/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kangschampagne">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kagen-Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/19/hello-world/" itemprop="url">Hello World</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-08-19T13:38:42+08:00">
                2017-08-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Kangschampagne" />
          <p class="site-author-name" itemprop="name">Kangschampagne</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">tags</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Kangschampagne</span>

  
</div>


  <div class="powered-by">
    Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
  </div>

  <span class="post-meta-divider">|</span>

  <div class="theme-info">
    Theme &mdash;
    <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
      NexT.Muse
    </a>
  </div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  








  





  

  

  

  

  

  

</body>
</html>
